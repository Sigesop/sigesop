sigesop.capturaOrdenTrabajo={document:function(e){var b=e.suf||"";var d='<form id="formCapturaOrdenes'+b+'"><div class="form-group"><div class="col-sm-12 col-md-12" id="tabla_captura_ordenes'+b+'"></div></div></form>',a=function(){var g=sigesop.tablaRegistro({suf:"_ordenTrabajo",head:"NÚMERO DE ORDEN, TRABAJO SOLICITADO, MANTENIMIENTO, SUPERVISOR, RESPONSABLE, AUXILIAR, FECHA PROGRAMADA, FECHA REPROGRAMADA",campo:"numero_orden, trabajo_solicitado, nombre_mantenimiento, orden_trabajo_personal.supervisor, orden_trabajo_personal.responsable, orden_trabajo_personal.auxiliar, fecha_programada, fecha_reprogramada"});
this.table.update_table=g.update_table;this.table.body=g.IDS.body;document.getElementById(this.IDS.idTabla.flushChar("#")).innerHTML="<br>"+g.html;$(g.IDS.body).contextMenu({selector:"tr",items:{insertData:{name:"Insertar datos",icon:"user",callback:function(j,k){var h=$(this).index();
typeof e.table.actions.insertData=="function"?e.table.actions.insertData(h):console.log("function insertData is null");}}}});},c={idTabla:"#tabla_captura_ordenes"+b,form:"#formCapturaOrdenes"+b},f={html:d,javascript:a,IDS:c,table:{body:null,update_table:null}};
return f;},documentInsertData:function(a){a.suf=a.suf||"";a.name=a.name+a.suf||"accordion"+a.suf;a.activate=a.activate||function(){};var b=function(d){if(jQuery.isEmptyObject(d)){console.log("[arr] es nulo");
return null;}var f='<div id="'+a.name+'">';for(var e=0,g=d.length;e<g;e++){f+="	<h3>"+d[e][a.campo]+'</h3>	<div data-value="'+d[e][a.dataValue]+'"></div>';
}f+="</div>";return f;},c={html:b(a.arr),javascript:function(){$("#"+a.name).accordion({collapsible:true,active:false,heightStyle:"content",icons:{header:"ui-icon-circle-arrow-e",activeHeader:"ui-icon-circle-arrow-s"},beforeActivate:function(d,f){var g=f.newPanel[0].id,e=document.getElementById(f.newPanel[0].id).getAttribute("data-value");
typeof a.activate==="function"?a.activate(g,e):null;}});},activate:a.activate,datos:{},IDS:{id_accordion:"#"+a.name}};return c;},documentActivity:function(a){if(jQuery.isEmptyObject(a.obj.actividades)){sigesop.msg("Info","Se requiere de los datos de la orden de trabajo","info");
return null;}var c=a.obj,k=a.suf||"",d='<form id="formActividadesEquipo_'+k+'" class="form-horizontal" role="form"><div class="form-group"><div class="panel panel-default table-responsive"><div class="panel-heading">LISTA DE VERIFICACION</div><table class="table table-bordered"><thead><tr><th><center>Actividad</center></th><th><center>Parámetro de aceptación</center></th><th><center>Lectura Actual</center></th><th><center>Lectura Posterior</center></th><th><center>Observaciones</center></th></tr></thead><tbody id="idBodyActividad_'+k+'"></tbody></table></div></div><div class="form-group"><p class="col-sm-9"><button id="btnGuardarLista_'+c.id_orden_trabajo+k+'" class="btn btn-success" type="submit"> <span class="glyphicon glyphicon-floppy-disk"></span> Guardar</button> <button id="btnLimpiarLista_'+c.id_orden_trabajo+k+'" class="btn btn-success" type="reset"> <span class=" glyphicon glyphicon-repeat"></span> Limpiar Campos</button></p></div></form>',g=function(m,l){},b=function(r){var v=[],n="",q=0,B=r.actividades.length;
for(q;q<B;q++){var s=r.actividades[q],o={id_actividad:s.id_actividad_verificar,observaciones:{valor:null,idHTML:"#obser_"+r.id_orden_trabajo+"_"+q+k,regexp:/^[\-\]!"#$%&\/()=?¡*[_:;,.{´+}¿'|^~\w\sáéíóúñ]{1,5000}$/i,popover:{content:"Caracteres no válidos ( 1-5000 caracteres )",placement:"top"}},validacion:[],datos_lectura_actual:[],datos_lectura_posterior:[]};
n+='<tr><td class="active col-lg-2 col-sm-2 text-justify">'+s.actividad_verificar+"</td>";n+='<td class="success col-lg-2 col-sm-2 text-justify">';var p=0,z=s.parametro_actividad.length;
for(p;p<z;p++){var l=s.parametro_actividad[p];switch(l.tipo_dato){case"BINARIO":n+=l.parametro+"&nbsp;"+l.dato+"<br>";break;case"TEXTO":n+=l.parametro+"&nbsp;"+l.dato+"<br>";
break;case"COMPARACION":n+=l.parametro+"&nbsp;"+l.dato+"&nbsp;"+l.unidad_medida+"<br>";break;case"RANGO":var y=l.dato.splitParametros(",");n+=l.parametro+"&nbsp;"+y[0]+'&nbsp; <span class="glyphicon glyphicon-minus"></span> &nbsp;'+y[1]+"&nbsp;"+l.unidad_medida+"<br>";
break;case"TOLERANCIA":var y=l.dato.splitParametros(","),u=parseInt(y[0]),A=parseInt(y[1]);n+=l.parametro+"&nbsp;"+y[0]+'&nbsp; <span class="glyphicon glyphicon-plus"></span><span class="glyphicon glyphicon-minus"></span> &nbsp;'+y[1]+"&nbsp;"+l.unidad_medida+"<br>";
break;default:n+=l.parametro+"&nbsp;"+l.dato+"&nbsp;"+l.unidad_medida+"<br>";break;}}n+="</td>";n+='<td class="success col-lg-2 col-sm-2">';var p=0,z=s.lectura_actual.length;
for(p;p<z;p++){var l=s.lectura_actual[p],t="actual_"+r.id_orden_trabajo+"_"+s.id_actividad_verificar+l.secuencia_datos+k,m=l.tipo_dato;var w={id_lectura:l.id,dato:{valor:null,name:t},tipo_dato:l.tipo_dato};
n+=l.parametro;if(m=="Binario"){n+='<br> &nbsp; <input type="radio" id="'+t+'_si" name="'+t+'"  value="si"> &nbsp; SI &nbsp;<input type="radio" name="'+t+'" id="'+t+'_no" value="no"> &nbsp; NO <br><br>';
w.dato.idHTML="#"+t+"_si";}else{if(m=="Datos"){n+='&nbsp; <input type="text" id="'+t+'" > &nbsp;'+l.unidad_medida+"<br><br>";w.dato.idHTML="#"+t;}}o.datos_lectura_actual.push(w);
}n+="</td>";n+='<td class="success col-lg-2 col-sm-2">';var p=0,z=s.lectura_posterior.length;for(p;p<z;p++){var l=s.lectura_posterior[p],t="post_"+r.id_orden_trabajo+"_"+s.id_actividad_verificar+s.lectura_actual[p].secuencia_datos+k,m=l.tipo_dato;
var x={id_lectura:l.id,dato:{valor:null,name:t},tipo_dato:l.tipo_dato};n+=l.parametro;if(m=="Binario"){n+='<br> &nbsp; <input type="radio" name="'+t+'" value="si" id="'+t+'_si" > &nbsp; SI &nbsp; <input type="radio" name="'+t+'"  value="no"> &nbsp; NO <br><br>';
x.dato.idHTML="#"+t+"_si";x.dato.popover={content:"valor no válido, seleccione una opcion",placement:"top"};}else{if(m=="Datos"){n+='&nbsp; <input type="text" id="'+t+'" > &nbsp;'+l.unidad_medida+"<br><br>";
x.dato.idHTML="#"+t;x.dato.regexp=/^[\-+]?([0-9](\.[0-9])?){1,50}$/i;x.dato.popover={content:"valor no válido, (1-50 caracteres numericos)",placement:"top"};
}}o.datos_lectura_posterior.push(x);}v.push(o);n+='</td><td class="info col-lg-2 col-sm-2"><textarea  id="obser_'+r.id_orden_trabajo+"_"+q+k+'" class="form-control eventoCambioMayuscula"></textarea></td></tr>';
}return{html:n,actividades:v};},j=function(){var n=this,m=b(c);document.getElementById(n.IDS.idTabla.flushChar("#")).innerHTML="<br>"+m.html;n.datos.datos_actividad=m.actividades;
var l=n.IDS.form;$(".eventoCambioMayuscula").eventoCambioMayuscula();},f={id_orden_trabajo:c.id_orden_trabajo,datos_actividad:null},e={idTabla:"#idBodyActividad_"+k,botonGuardar:"#btnGuardarLista_"+c.id_orden_trabajo+k,botonLimpiar:"#btnLimpiarLista_"+c.id_orden_trabajo+k,form:"#formActividadesEquipo_"+k,$form:null},h={html:d,javascript:j,datos:f,IDS:e};
return h;},validacion:function(f){if(jQuery.isEmptyObject(f)){console.log("Matriz vacia, imposible continuar con validacion");return false;}var d=[],c=function(g){if(jQuery.isArray(g)){var k=[];
for(var j=0,m=g.length;j<m;j++){var o=sigesop.array_key_exists("observaciones",g[j]),n=sigesop.array_key_exists("datos_lectura_actual",g[j]),h=sigesop.array_key_exists("datos_lectura_posterior",g[j]),l=sigesop.array_key_exists("validacion",g[j]);
if(o&&n&&h&&l){k.push(a(g[j].datos_lectura_actual,g[j].datos_lectura_posterior,g[j].validacion,g[j].observaciones));}else{console.log("Propiedades incompletas para iniciar validacion de Actividades");
return false;}}for(var j=0,m=k.length;j<m;j++){if(k[j]===false){return false;}}return true;}else{return false;console.log("Elemento propiedad: datos_actividad no es un arreglo");
}},a=function(l,g,j,o){if(jQuery.isEmptyObject(l)&&jQuery.isEmptyObject(g)&&jQuery.isEmptyObject(j)){console.log("arreglos [ arr_actual || arr_post || arr_validar ] vacios");
return false;}var h=true;if(o.valor){h=sigesop.validacion([o],{tipoValidacion:"error"});}else{sigesop.vaciarPopover([o]);}if(h){var n=l.length,k=g.length,m=j.length;
if(m==1){return e(j[0],l,g);}else{if(m>1){if((n&&k)==m){return b(j,l,g);}else{console.log("arr_actual: "+n+" arr_post: "+k+" arr_avalidar: "+m);console.log("longitud de [ arr_actual || arr_post || arr_avalidar ] no son iguales");
return false;}}else{return false;console.log("longitud de [ arr_validar ] no valida o es nula");}}}else{return false;}},e=function(o,l,g){var k=[];switch(o.tipo_dato){case"TEXTO":for(var j=0,n=l.length;
j<n;j++){k.push(sigesop.validacion([l[j].dato],{tipoValidacion:"error"}));k.push(sigesop.validacion([g[j].dato],{tipoValidacion:"error"}));}break;case"COMPARACION":for(var j=0,n=l.length;
j<n;j++){var h=sigesop.validacion([l[j].dato],{tipoValidacion:"error"}),m=sigesop.validacion([g[j].dato],{tipoValidacion:"error"});if(h&&m){l[j].dato.valor==o.dato?l[j].dato.prioridad=null:l[j].dato.prioridad="U";
g[j].dato.valor==o.dato?g[j].dato.prioridad=null:g[j].dato.prioridad="U";k.push(true);}else{k.push(false);}}break;case"RANGO":return"RANGO";break;case"TOLERANCIA":return"TOLERANCIA";
break;default:console.log("Tipo de dato: ["+o.tipo_dato+"] no esta definido");return false;break;}return sigesop.mtzValidacion(k);},b=function(h,l,g){var k=[],j=0,m=h.length;
for(j;j<m;j++){k.push(e(h[j],[l[j]],[g[j]]));}return sigesop.mtzValidacion(k);};if(jQuery.isPlainObject(f)){if(sigesop.array_key_exists("datos_actividad",f)){d.push(c(f.datos_actividad));
}else{d.push(false);console.log("Elemento sin propiedad: datos_actividad");}}else{if(jQuery.isArray(f)){for(i=0,lon=f.length;i<lon;i++){d.push(this.validacion(f[i]));
}}else{console.log("El elemento ingresado no es una lista de datos válida para listas de verificacion");return false;}}return sigesop.mtzValidacion(d);
}};